<!-- templates/index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>게시판</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>게시판</h1>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>제목</th>
                <th>내용</th>
                <th>작성일</th>
                <th>작업</th>
            </tr>
        </thead>
        <tbody>
            {% for post in posts %}
                <tr>
                    <td>{{ post.id }}</td>
                    <td>{{ post.title }}</td>
                    <td>{{ post.content }}</td>
                    <td>{{ post.created_at }}</td>
                    <td>
                        <a href="/edit/{{ post.id }}">수정</a>
                        <a href="/delete/{{ post.id }}" onclick="return confirm('삭제하시겠습니까?')">삭제</a>
                    </td>
                </tr>
                <!-- 댓글 작성 폼 -->
                <tr>
                    <td colspan="5">
                        <form action="/add_comment/{{ post.id }}" method="POST" class="comment-form">
                            <input type="text" name="comment_text" placeholder="댓글 작성">
                            <button type="submit">댓글 작성</button>
                        </form>
                    </td>
                </tr>
                <!-- 댓글 목록 -->
                <tr>
                    <td colspan="5">
                        <ul>
                            {% for comment in post.comments %}
                                <li>
                                    {{ comment.text }}
                                    <span class="comment-date">({{ comment.created_at }})</span>
                                    <form method="POST" action="/delete_comment/{{ comment.id }}" onsubmit="return confirm('댓글을 삭제하시겠습니까?')">
                                        <button type="submit" class="delete-button">삭제</button>
                                    </form>
                                </li>
                            {% endfor %}
                        </ul>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <a href="/create" class="btn">게시물 작성</a>
    <form action="/search" method="POST" class="search-form">
    <input type="text" name="keyword" class="search-input" placeholder="검색어 입력">
    <button type="submit" class="search-button">검색</button>
</form>
</body>
</html>
